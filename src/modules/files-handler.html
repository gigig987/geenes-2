<article id="file-handler">
  <template id="folder-template">
    <li draggable="true" aria-grabbed="false" >
      <form aria-dropeffect="none" data-drop="true" class="flow-h">
      <details class="folder">
          <summary>
            <div>
              <label>
                <input name="name" type="text" readonly disabled value="" tabIndex="-1"/>
              </label>
              <fieldset>
                <menu class="flow-h">
                  <li>
                    <button class="button-link" name="rename" aria-label="rename">✎</button>
                  </li>
                  <li>
                    <button class="button-link" name="move" aria-label="move">⇅</button>
                  </li>
                  <li>
                    <button class="button-link" name="delete" aria-label="delete">✕</button>
                  </li>
                </menu>
              </fieldset>
            </div>
          </summary>
          <ol></ol>
        </details>
      </form>
    </li>
  </template>
  <template id="file-template">
    <li draggable="true" aria-grabbed="false" tabIndex="0">
      <form class="flow-h">
        <label name="file-type" class="flow-h">
          <span></span>
          <input name="name" type="text" readonly  disabled value="" tabIndex="-1"/>
        </label>
        <fieldset>
          <menu class="flow-h">
            <li>
              <button class="button-link" name="rename" aria-label="rename">✎</button>
            </li>
            <li>
              <button class="button-link" name="move" aria-label="move">⇅</button>
            </li>
            <li>
              <button class="button-link" name="delete" aria-label="delete">✕</button>
            </li>
          </menu>
        </fieldset>
      </form>
    </li>
  </template>
    <details open>
      <summary>
          Files
        <aside>
          <!-- THIS empty form will not be rendered but it's used to display the others -->
          <form></form>
          <form name="files-actions">
            <menu class="flow-h">
              <li><button class=" color-emoji" name="new-file" aria-label="new file">📄</button></li>
              <li><button class=" color-emoji" name="new-folder" aria-label="new folder">📁</button></li>
            </menu>
          </form>
          </aside>
        </summary>
        <form aria-dropeffect="none" data-drop="true" data-root="true">
          <ol>
          </ol>
        </form>
    </details>
</article>

<style>
  .folder > summary {
    list-style-type: "\1F4C1";
  }
  .folder[open] > summary {
    list-style-type: "\1F4C2";
  }
  .folder > summary fieldset {
    display: inline-flex;
  }
  .dragover {
    background-color: var(--color-surface-deep);
  }

  *[aria-grabbed="true"] > form:not([data-drop="true"]), *[aria-grabbed="true"] > form > details > summary {
    outline: 1px dotted #212121;
    outline: 5px auto -webkit-focus-ring-color;
  }
  #file-handler {
    height: 100%;
  }
  #file-handler ol {
    list-style-type: none;
    padding: 0;
    flex: 1;
    padding-left: var(--space-indent);
    margin-bottom: var(--space-indent);
  }
  #file-handler li {
    list-style-type: none;
    padding: 0;
  }
  #file-handler *[data-root="true"] > ol {
    padding-left: 0;
  }
  #file-handler form {
    display: flex;
  }
  #file-handler form > * {
    flex: 1;
  }
  #file-handler [draggable="true"] > form menu {
    display: none;
  }
  #file-handler [aria-grabbed="true"] > form > details > summary > div > fieldset > menu,
  #file-handler [aria-grabbed="true"] > form > fieldset > menu
  {
    display: inline-flex;
  }
  #file-handler menu {
   display: inline-flex;
   --spacing: var(--space-inner);
   margin:0;
   padding:0;
  }
  #file-handler menu button {
    font-weight: bolder;
  }
  #file-handler form label {
    display: inline-flex;
  }
  #file-handler form summary > * {
    display: inline-flex;
    width: calc(100% - 22px);
  }
  #file-handler form summary label {
    pointer-events: none;
  }
  #file-handler form label + fieldset, #file-handler form input + fieldset {
    flex-grow: 0;
  }
  #file-handler form input {
    width: 100%;
  }
  #file-handler label[name="file-type"] {
    --spacing: var(--space-on-input-h);
  }
</style>